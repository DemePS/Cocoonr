{% extends 'reservations/base.html' %}

{% block content %}
<div class="form-container">
    <h1 class="form-title">
        <i class="fas fa-home"></i>
        {% if form.instance.pk %}Modifier{% else %}Nouveau{% endif %} logement
    </h1>
    
    <!-- Affichage des erreurs non liées à un champ spécifique -->
    {% if form.non_field_errors %}
        <div class="alert alert-error">
            <i class="fas fa-exclamation-circle"></i>
            {% for error in form.non_field_errors %}
                {{ error }}
            {% endfor %}
        </div>
    {% endif %}
    
    <form method="post">
        {% csrf_token %}
        
        <!-- Champ Nom -->
        <div class="form-group">
            <label for="{{ form.nom.id_for_label }}" class="form-label">
                {{ form.nom.label }}
                {% if form.nom.field.required %}<span class="form-required">*</span>{% endif %}
            </label>
            <input type="text"
                   name="{{ form.nom.name }}"
                   id="{{ form.nom.id_for_label }}"
                   class="form-control {% if form.nom.errors %}error{% endif %}"
                   value="{{ form.nom.value|default:'' }}"
                   {% if form.nom.field.required %}required{% endif %}>
            {% if form.nom.errors %}
                <div class="form-error">
                    {% for error in form.nom.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
            {% if form.nom.help_text %}
                <p class="form-text">{{ form.nom.help_text }}</p>
            {% endif %}
        </div>
        
        <!-- Champ Capacité -->
        <div class="form-group">
            <label for="{{ form.capacite.id_for_label }}" class="form-label">
                {{ form.capacite.label }}
                {% if form.capacite.field.required %}<span class="form-required">*</span>{% endif %}
            </label>
            <input type="number"
                   name="{{ form.capacite.name }}"
                   id="{{ form.capacite.id_for_label }}"
                   min="1"
                   class="form-control number-input {% if form.capacite.errors %}error{% endif %}"
                   value="{{ form.capacite.value|default:'1' }}"
                   {% if form.capacite.field.required %}required{% endif %}>
            {% if form.capacite.errors %}
                <div class="form-error">
                    {% for error in form.capacite.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
            {% if form.capacite.help_text %}
                <p class="form-text">{{ form.capacite.help_text }}</p>
            {% endif %}
        </div>
        
        <div class="form-actions">
            <a href="{% url 'reservations:logement-list' %}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Retour à la liste
            </a>
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Enregistrer
            </button>
        </div>
    </form>
</div>
{% endblock %}
